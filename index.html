<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Planet Bini (9:16)</title>
  <style>
    :root{
      --ringSize: 86vmin;     /* ukuran ring */
      --imgSize: 8.2vmin;     /* ukuran foto */
      --glow: 1;              /* diubah via beat */
    }

    html,body{
      margin:0; height:100%;
      background:#000;
      overflow:hidden;
      font-family: ui-monospace, Menlo, Consolas, monospace;
    }

    /* Center 9:16 area */
    #stage{
      position:fixed;
      left:50%; top:50%;
      transform:translate(-50%,-50%);
      width:min(100vw, calc(100vh * 9/16));
      height:min(100vh, calc(100vw * 16/9));
      background:#000;
      overflow:hidden;
    }

    /* Nebula background */
    .nebula{
      position:absolute; inset:-20%;
      background:
        radial-gradient(circle at 20% 30%, rgba(0,180,255,.18), transparent 55%),
        radial-gradient(circle at 75% 25%, rgba(255,0,190,.16), transparent 58%),
        radial-gradient(circle at 55% 75%, rgba(0,255,160,.14), transparent 60%),
        radial-gradient(circle at 40% 55%, rgba(255,255,255,.06), transparent 55%);
      filter: blur(55px) saturate(1.2);
      opacity: .9;
      animation: nebMove 14s ease-in-out infinite alternate;
    }
    @keyframes nebMove{
      from{ transform: translate(-1.2%, -1%) scale(1.02); }
      to  { transform: translate( 1.2%,  1%) scale(1.05); }
    }

    /* Starfield */
    .stars{
      position:absolute; inset:0;
      background-image:
        radial-gradient(circle, rgba(255,255,255,.9) 1px, transparent 1px),
        radial-gradient(circle, rgba(255,255,255,.6) 1px, transparent 1px),
        radial-gradient(circle, rgba(255,255,255,.35) 1px, transparent 1px);
      background-size: 160px 160px, 220px 220px, 320px 320px;
      background-position: 20px 40px, 120px 10px, 60px 80px;
      opacity:.18;
      animation: starsDrift 30s linear infinite;
    }
    @keyframes starsDrift{
      from{ transform: translate3d(0,0,0); }
      to  { transform: translate3d(-120px,-160px,0); }
    }

    /* Vignette */
    .vignette{
      position:absolute; inset:0;
      background: radial-gradient(circle at 50% 55%, transparent 35%, rgba(0,0,0,.85) 75%);
      pointer-events:none;
    }

    /* Core planet */
    .coreWrap{
      position:absolute;
      left:50%; top:52%;
      transform:translate(-50%,-50%);
      width: 28vmin; height: 28vmin;
      pointer-events:none;
    }

    .core{
      position:absolute; inset:0;
      border-radius:50%;
      background:
        radial-gradient(circle at 35% 35%,
          rgba(255,255,255,.95),
          rgba(180,255,240,.55) 28%,
          rgba(80,180,255,.25) 55%,
          rgba(0,0,0,.95) 78%,
          rgba(0,0,0,1) 100%);
      box-shadow:
        0 0 calc(70px * var(--glow)) rgba(100,220,255,.55),
        0 0 calc(120px * var(--glow)) rgba(255,0,200,.25);
      animation: corePulse 2.2s ease-in-out infinite;
    }
    @keyframes corePulse{
      0%  { filter: brightness(1.0); }
      50% { filter: brightness(calc(1.0 + .25 * var(--glow))); }
      100%{ filter: brightness(1.0); }
    }

    .atmo{
      position:absolute; inset:-12%;
      border-radius:50%;
      background: radial-gradient(circle, rgba(120,255,240,.08), transparent 60%);
      box-shadow: 0 0 calc(90px * var(--glow)) rgba(0,255,200,.16);
      filter: blur(1px);
    }

    /* Ring orbit */
    #ring{
      position:absolute;
      left:50%; top:52%;
      transform: translate(-50%,-50%);
      width: var(--ringSize);
      height: var(--ringSize);
      border-radius: 50%;
      animation: spin var(--spinDur) linear infinite;
      will-change: transform;
    }
    @keyframes spin{
      from{ transform: translate(-50%,-50%) rotate(0deg); }
      to  { transform: translate(-50%,-50%) rotate(360deg); }
    }

    /* Photos */
    .p{
      position:absolute;
      width: var(--imgSize);
      height: var(--imgSize);
      border-radius: 999px;
      overflow:hidden;
      transform: translate(-50%,-50%);
      background: rgba(255,255,255,.04);
      box-shadow:
        0 0 calc(18px * var(--glow)) rgba(255,255,255,.35),
        0 0 calc(30px * var(--glow)) rgba(80,180,255,.18);
      border: 1px solid rgba(255,255,255,.14);
      filter: contrast(1.05) saturate(1.05);
    }
    .p img{
      width:100%; height:100%;
      object-fit:cover;
      display:block;
    }

    /* UI */
    #ui{
      position:absolute; left:12px; top:12px;
      color: rgba(255,255,255,.92);
      background: rgba(0,0,0,.45);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 14px;
      padding: 10px 12px;
      backdrop-filter: blur(12px);
      max-width: 340px;
    }
    #ui .title{ font-weight:800; font-size:12px; margin-bottom:6px; }
    #ui .mut{ font-size:11px; opacity:.78; line-height:1.35; }
    #ui .row{ display:flex; gap:8px; margin-top:8px; }
    #ui button{
      flex:1;
      cursor:pointer;
      border-radius:12px;
      padding:10px 10px;
      border:1px solid rgba(255,255,255,.16);
      background:rgba(255,255,255,.06);
      color:#fff;
      font-size:12px;
    }
    #ui button:hover{ background:rgba(255,255,255,.10); }
    #beat{
      display:inline-block;
      margin-top:6px;
      padding:4px 8px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.06);
      font-size:11px;
      opacity:.9;
    }

    /* Small tip bottom */
    #tip{
      position:absolute; left:50%; bottom:14px;
      transform:translateX(-50%);
      font-size:11px;
      color:rgba(255,255,255,.55);
      background:rgba(0,0,0,.25);
      border:1px solid rgba(255,255,255,.10);
      border-radius:999px;
      padding:6px 10px;
      backdrop-filter: blur(10px);
      pointer-events:none;
    }
  </style>
</head>

<body>
  <div id="stage">
    <div class="nebula"></div>
    <div class="stars"></div>

    <div class="coreWrap">
      <div class="atmo"></div>
      <div class="core"></div>
    </div>

    <div id="ring"></div>

    <div class="vignette"></div>

    <div id="ui">
      <div class="title">ü™ê Planet Bini ‚Äî Cinematic (9:16)</div>
      <div class="mut">
        - sumber foto: <b>43</b> (repeat jadi vibe planet)<br>
        - nebula glow cinematic<br>
        - beat sync ringan (aman HP)<br>
        - musik butuh klik (aturan browser)
      </div>
      <div class="row">
        <button id="play">‚ñ∂ Play Music</button>
        <button id="pause">‚è∏ Pause</button>
      </div>
      <div id="beat">Beat: 0.00</div>
    </div>

    <div id="tip">Tip: fullscreen + volume up üé∂</div>

    <audio id="music" src="music.mp3" loop preload="auto"></audio>
  </div>

<script>
  // ===== SETTINGS =====
  const TEX_COUNT = 43;     // kamu punya 1.jpg - 43.jpg
  const TOTAL_ON_RING = 43; // jumlah foto yang ditaruh melingkar (biar rapi)
  // Putaran: makin kecil makin cepat. Beat bakal mempercepat juga.
  let baseSpinSeconds = 34;

  // ===== CREATE RING PHOTOS =====
  const ring = document.getElementById('ring');
  // set durasi default
  ring.style.setProperty('--spinDur', baseSpinSeconds + 's');

  // radius ring (% dari container ring)
  const r = 50; // persen
  for (let i = 0; i < TOTAL_ON_RING; i++) {
    const n = (i % TEX_COUNT) + 1; // repeat dari 1..43
    const angle = (360 / TOTAL_ON_RING) * i;
    const x = 50 + r * Math.cos(angle * Math.PI/180);
    const y = 50 + r * Math.sin(angle * Math.PI/180);

    const wrap = document.createElement('div');
    wrap.className = 'p';
    wrap.style.left = x + '%';
    wrap.style.top  = y + '%';

    const img = document.createElement('img');
    img.src = `fotos/${n}.jpg`;
    img.loading = 'lazy';

    wrap.appendChild(img);
    ring.appendChild(wrap);
  }

  // ===== AUDIO + BEAT SYNC (LIGHTWEIGHT) =====
  const music = document.getElementById('music');
  const playBtn = document.getElementById('play');
  const pauseBtn = document.getElementById('pause');
  const beatEl = document.getElementById('beat');

  let audioCtx, analyser, dataArray;
  let beat = 0;

  function setupAudio(){
    if (audioCtx) return;
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    analyser = audioCtx.createAnalyser();
    analyser.fftSize = 1024;
    analyser.smoothingTimeConstant = 0.82;
    dataArray = new Uint8Array(analyser.frequencyBinCount);

    const src = audioCtx.createMediaElementSource(music);
    src.connect(analyser);
    analyser.connect(audioCtx.destination);
  }

  playBtn.addEventListener('click', async ()=>{
    try{
      setupAudio();
      if (audioCtx.state !== 'running') await audioCtx.resume();
      await music.play();
    }catch(e){
      alert('Gagal play. Pastikan music.mp3 ada sejajar dengan index.html');
    }
  });

  pauseBtn.addEventListener('click', ()=>{
    music.pause();
  });

  function calcBeat(){
    if (!analyser) { beat = 0; return; }
    analyser.getByteFrequencyData(dataArray);

    // ambil low-mid (kick-ish)
    let sum = 0;
    const start = 2;
    const end = Math.floor(dataArray.length * 0.22);
    for (let i = start; i < end; i++) sum += dataArray[i];
    const avg = sum / (end - start) / 255;

    // beat 0..1
    beat = Math.max(0, Math.min(1, avg * 1.7));
    beatEl.textContent = 'Beat: ' + beat.toFixed(2);

    // efek: glow + speed
    document.documentElement.style.setProperty('--glow', (1 + beat * 1.6).toFixed(2));

    // spin makin cepat pas beat (durasi lebih kecil = lebih cepat)
    const speed = Math.max(10, baseSpinSeconds - beat * 14);
    ring.style.setProperty('--spinDur', speed.toFixed(1) + 's');
  }

  // ===== LOOP =====
  function loop(){
    calcBeat();
    requestAnimationFrame(loop);
  }
  loop();

  // ===== TAP TO FULLSCREEN (opsional) =====
  document.getElementById('stage').addEventListener('dblclick', async ()=>{
    try{
      if (!document.fullscreenElement) await document.documentElement.requestFullscreen();
      else await document.exitFullscreen();
    }catch(e){}
  });
</script>
</body>
  </html>
